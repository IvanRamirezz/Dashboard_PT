---
import icono from "../../public/assets/icon.png";

const currentPath = Astro.url.pathname.replace(/\/+$/, "") || "/";

const navItems = [
  { href: "/Dashboard", icon: "/assets/inicio.png", label: "Inicio" },
  { href: "/Asignar", icon: "/assets/asignar.png", label: "Asignar" },
  { href: "/Alumnos", icon: "/assets/alumno.png", label: "Alumnos" },
  { href: "/Practicas", icon: "/assets/practicas.png", label: "Practicas" },
  { href: "/Cargar-grupo", icon: "/assets/cargando.png", label: "Cargar grupo" },

  { href: "/api/auth/signout", icon: "/assets/salida.png", label: "Cerrar sesi√≥n", logout: true },
];
---

<div class="sidebar">
  <div class="sidebar-title">
    <img src={icono.src} alt="icono" class="icon" />
    Dashboard
  </div>

  <nav class="nav-section">
    {navItems
      .filter((item) => !item.logout)
      .map(({ href, icon, label }) => {
        const isActive = currentPath === href;

        return (
          <a href={href} class={`nav-item ${isActive ? "active" : ""}`}>
            <img src={icon} class="icon" />
            {label}
          </a>
        );
      })}
  </nav>

  <div class="logout-section">
    {navItems
      .filter((item) => item.logout)
      .map(({ href, icon, label }) => {
        return (
          <form action={href} method="get">
            <button type="submit" class="nav-item logout">
              <img src={icon} class="icon" />
              {label}
            </button>
          </form>
        );
      })}
  </div>
</div>

<style>
  .sidebar {
    display: flex;
    flex-direction: column;
    height: 100vh;
  }

  .sidebar-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 1rem;
    font-weight: 700;
  }

  .nav-section {
    flex: 1;
  }

  .nav-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    text-decoration: none;
    color: #111827;
  }

  .nav-item.active {
    background-color: #e5e7eb;
    font-weight: 600;
  }

  .logout-section {
    margin-top: auto;
    padding-bottom: 1rem;
  }

  .nav-item.logout {
    width: 100%;
    border: none;
    background: transparent;
    text-align: left;
    cursor: pointer;
    color: #e11d48;
  }

  .nav-item.logout:hover {
    background-color: #fee2e2;
  }

  .icon {
    width: 20px;
    height: 20px;
  }
</style>
