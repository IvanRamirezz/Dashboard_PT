---
const normalizePath = (path) =>
  path.replace(/\/+$/, '') === '' ? '/' : path.replace(/\/+$/, '');

const currentPath = normalizePath(Astro.url.pathname);
const base = import.meta.env.BASE_URL;

const navItems = [
  { href: '/', icon: 'assets/inicio.png', label: 'Inicio' },
  { href: '/Asignar', icon: 'assets/asignar.png', label: 'Asignar' },
  { href: '/Alumnos', icon: 'assets/alumno.png', label: 'Alumnos' },
  { href: '/Cargar-grupo', icon: 'assets/cargando.png', label: 'Cargar grupo' },
];
---
<div class="sidebar">
  <div class="sidebar-title">
    <img src={`${base}assets/icon.png`} alt="icono" class="icon" />
    Dashboard
  </div>
  <nav>
    {navItems.map(({ href, icon, label }) => {
      const path = href.replace(/^\//, '');
      const fullHref = normalizePath(`${base}${path}`);

      // Para el Ã­tem "Inicio", aceptamos tanto base normal como base sin slash
      const isActive =
        href === '/'
          ? currentPath === normalizePath(base) || currentPath === '/'
          : currentPath === fullHref;

      return (
        <a href={fullHref} class={`nav-item ${isActive ? 'active' : ''}`}>
          <img src={`${base}${icon}`} class="icon" />
          {label}
        </a>
      );
    })}
  </nav>
</div>
