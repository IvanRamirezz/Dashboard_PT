---
import DashboardLayout from '../layouts/DashboardLayout.astro';
import StatCard from '../components/Home/Statcard.astro';
import ActionButton from '../components/Home/ActionButton.astro';
import Greeting from '../components/Home/Greeting';
import cargargrupo from "../../public/assets/cargar.png";
import asignar_practica from "../../public/assets/formacion.png";
import '../styles/style.css';
import { requireAuth } from "../lib/authGuard";

const authResult = await requireAuth(Astro);

// ⬇️ SI requireAuth devolvió un Response (redirect),
// lo regresamos y Astro YA NO sigue renderizando la página.
if (authResult instanceof Response) {
  return authResult;
}

---

  <DashboardLayout>
    <section class="content">
      <Greeting client:load />

      <div class="stats">
        <StatCard label="Grupos registrados" value="3" />
        <StatCard label="Prácticas activas" value="5" />
        <StatCard label="Alumnos activos" value="120" />
      </div>

      <div class="actions">
        <ActionButton href="#" icon={cargargrupo.src} label="Cargar grupo (Excel)" />
        <ActionButton href="#" icon={asignar_practica.src} label="Asignar práctica" />
      </div>
    </section>
</DashboardLayout>


